<!DOCTYPE html>
<html>
	<head>
		<title>Witch Defense Game</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="user-scalable=0", minimum-scale=1.0, maximum-scale=1.0/>
		<script src='lib/quintus.js'></script>
		<script src='lib/quintus_sprites.js'></script>
		<script src='lib/quintus_scenes.js'></script>
		<script src='lib/quintus_input.js'></script>
		<script src='lib/quintus_anim.js'></script>
		<script src='lib/quintus_2d.js'></script>
		<script src='lib/quintus_touch.js'></script>
		<script src='lib/quintus_ui.js'></script>
		<script src='lib/quintus_audio.js'></script>
	
	</head>
	<body style="background-color: black;margin:0px;border:0px;" ng-app="starter">
	<script>
			window.addEventListener("load",function(){
				var Q = window.Q = Quintus({development: true})
				.include('Sprites, Scenes, 2D, UI')
				.setup({
					width: 600,
					height: 400,
					scaleToFit: true,
				});

				//constants
				Q.SPRITE_HEMOGLOB = 4;
				Q.SPRITE_SHARKGUY = 8;
				Q.SPRITE_BULLET = 16;
				Q.SPRITE_GROUND = 32;

				//turn off gravity
				Q.gravityY = 0;
				Q.gravityX = 0;


				Q.Sprite.extend("Sharkguy", {
					init: function(p){
						this._super(p, {
							asset: "sharkguy.gif",
							type: Q.SPRITE_SHARKGUY,
							vx: -45,
							scale: .5,
						});
						this.add("2d");
					},	

					//deltatime, check for position of sprite
					step: function(dt) {
						//if current parameter is at 240 on x
						if(this.p.x <=100) {
							this.destroy();
							console.log("You're a bloody mess!")
							//restart game
							Q.stageScene('level')
						}
					}

				});


				Q.Sprite.extend("Hemoglob", {
					init: function(p){
						this._super(p, {
							asset: "hemoglob.gif",
							type: Q.SPRITE_HEMOGLOB,
							//vx and vy to change their speed
							vx: -25,
							scale: .75,
						});
						this.add("2d");
					},
					step: function(dt) {
						//if current parameter is at 240 on x
						if(this.p.x <=100) {
							this.destroy();
							console.log("You're a bloody mess!")
							//restart game
							Q.stageScene('level')
						}
					}
				});

				Q.scene("level",function(stage){
					var background = new Q.Sprite({
						x: 600/2,
						y: 400/2,
						asset: "redskybg.png",
						type: Q.SPRITE_GROUND
					});
					var hemoglob1 = new Q.Hemoglob({
						x: 370, 
						y: 200,
					});
					var hemoglob2 = new Q.Hemoglob({
						x: 390,
						y: 100
					});
					var sharkguy1 = new Q.Sharkguy({
						x: 499,
						y: 300

					});

					stage.insert(background);
					stage.insert(hemoglob1);
					stage.insert(hemoglob2);
					stage.insert(sharkguy1);

					var sidePanel = new Q.SidePanel();
					stage.insert(sidePanel);
				});

				Q.load("nighttimebg.png, redskybg.png, cutiewitch.gif, sharkguy.gif, hemoglob.gif, potion.png", function(){
					Q.stageScene("level");
				});

				Q.UI.Container.extend("SidePanel", {
					init: function() {
						this._super({
							fill: '#ccccff',
							x: 120/2,
							y: 30/2,
							radius: 10,
							border: 5,  
							shadow: 0,
							w: 90,
							h: 120,
						});

					this.on("inserted");	
					},
					inserted: function() {
						var potion = new Q.Sprite({
							asset: 'potion.png',
							x: 60,
							y: 40, 
							scale: .85,
						});
						this.stage.insert(potion);

						/*this.totalPotion = new Q.UI.Text({
							x: 60,
							y: 40,
							label: "potion"
						})*/
					}
				})
			});
		</script>
	</body>
</html>